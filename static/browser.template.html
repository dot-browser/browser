<!--  
    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<!DOCTYPE window>

<html
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	xmlns="http://www.w3.org/1999/xhtml"
	id="browser-window"
	chromemargin="0,2,2,2"
	windowtype="navigator:browser"
	scrolling="false"
>
	<head>
		<title>Dot Browser</title>

		<script>
			const { Services } = ChromeUtils.import(
				"resource://gre/modules/Services.jsm"
			);

			window.Services = Services;

			Services.scriptloader.loadSubScript(
				"chrome://dot/content/browser.js",
				this
			);
			Services.scriptloader.loadSubScript(
				"chrome://dot/content/browser-init.js",
				this
			);

			window.onload = gBrowserInit.onLoad.bind(gBrowserInit);
			window.onunload =
				gBrowserInit.onUnload.bind(gBrowserInit);
			// window.onclose = WindowIsClosing;

			window.addEventListener(
				"MozBeforeInitialXULLayout",
				gBrowserInit.onBeforeInitialXULLayout.bind(
					gBrowserInit
				),
				{ once: true }
			);
			window.addEventListener(
				"DOMContentLoaded",
				gBrowserInit.onDOMContentLoaded.bind(gBrowserInit),
				{ once: true }
			);
		</script>
	</head>

	<body>
		<div id="app"></div>

		<script>
			Services.scriptloader.loadSubScript(
				"chrome://dot/content/browser.js",
				this
			);
		</script>
	</body>
</html>
